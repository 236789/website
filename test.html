<!DOCTYPE html>
<html lang="ro">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B6DWPJ4T2C"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-B6DWPJ4T2C');
  </script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KSDA — Pagina Noua</title>
  <link rel="icon" type="image/png" href="https://iili.io/fXks1Dv.png">

  <!-- Fonts: Orbitron & Poppins -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;800;900&family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* --- VARIABLES & THEME --- */
    :root {
      --bg-dark: #050b14;
      --primary: #29f3ff;
      --primary-dim: rgba(41, 243, 255, 0.15);
      --text-main: #ffffff;
      --text-muted: #a5b1c2;
      --glass-bg: rgba(13, 25, 41, 0.7);
      --glass-border: rgba(255, 255, 255, 0.08);
      --card-radius: 24px;
      --gold: #ffd700;
    }

    * { box-sizing: border-box; outline: none; }
    html { scroll-behavior: smooth; }

    body {
      margin: 0;
      min-height: 100vh;
      background-color: var(--bg-dark);
      background-image: linear-gradient(to bottom, rgba(5, 11, 20, 0.85), var(--bg-dark)), url('https://i.makeagif.com/media/3-03-2021/otrneG.gif');
      background-position: center; background-size: cover; background-attachment: fixed;
      font-family: 'Poppins', sans-serif; color: var(--text-main); overflow-x: hidden;
    }

    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: var(--bg-dark); }
    ::-webkit-scrollbar-thumb { background: #1f3a52; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--primary); }

    h1, h2, h3, .logo, .btn, #sideMenu a, .login-btn-header, .side-menu-login-btn, .pop-user, .streak-txt, .coins-count { 
        font-family: 'Orbitron', sans-serif; 
    }

    /* --- GLOBAL OVERLAYS --- */
    #bannedOverlay { display: none; position: fixed; inset: 0; background: rgba(10, 0, 0, 0.98); z-index: 10000; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 20px; }
    .ban-details { background: rgba(255, 0, 0, 0.1); border: 1px solid #ff4757; padding: 30px; border-radius: 20px; max-width: 500px; width: 100%; }

    /* --- MODALS --- */
    .account-modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: none; justify-content: center; align-items: center; z-index: 11000; backdrop-filter: blur(10px); }
    .account-modal-overlay.active { display: flex; }
    .account-card { background: #08101b; border: 1px solid var(--primary); width: 90%; max-width: 380px; border-radius: 30px; padding: 40px 25px; text-align: center; position: relative; animation: jumpIn 0.5s forwards; }
    @keyframes jumpIn { 0% { transform: scale(0.3) translateY(100px); opacity: 0; } 100% { transform: scale(1) translateY(0); opacity: 1; } }

    .pop-img { width: 90px; height: 90px; border-radius: 50%; border: 2px solid var(--primary); margin-bottom: 12px; object-fit: cover; }
    .close-pop { position: absolute; top: 15px; right: 20px; color: #fff; cursor: pointer; font-size: 24px; background: none; border: none; }
    
    /* CURRENCY & STREAK */
    .currency-wrapper { display: flex; gap: 12px; justify-content: center; margin-bottom: 25px; }
    .currency-card { flex: 1; background: rgba(5, 11, 20, 0.6); border-radius: 18px; padding: 12px 8px; display: flex; flex-direction: column; align-items: center; border: 2px solid rgba(255,255,255,0.1); }
    .streak-box { display: inline-flex; align-items: center; gap: 8px; background: rgba(255, 69, 0, 0.1); border-radius: 50px; padding: 6px 16px; margin-bottom: 15px; border: 1px solid rgba(255, 69, 0, 0.2); color: #ff4500; font-weight: 800; font-size: 13px; }

    /* HEADER */
    .header-container { position: fixed; top: 0; left: 0; right: 0; padding: 20px; z-index: 1000; display: flex; justify-content: center; }
    header { width: 100%; max-width: 1200px; display: flex; align-items: center; justify-content: space-between; padding: 10px 30px; background: rgba(5, 11, 20, 0.6); border: 1px solid var(--glass-border); border-radius: 100px; backdrop-filter: blur(16px); }
    .logo img { height: 40px; vertical-align: middle; }
    nav { display: flex; gap: 32px; align-items: center; }
    nav a { color: var(--text-muted); text-decoration: none; font-size: 13px; font-weight: 600; transition: 0.3s; }
    .login-btn-header { background: transparent; border: 1.5px solid var(--primary); color: var(--primary); padding: 8px 20px; border-radius: 20px; font-size: 12px; font-weight: 700; cursor: pointer; display: flex; align-items: center; gap: 8px; }
    .user-avatar-small { width: 24px; height: 24px; border-radius: 50%; border: 1px solid #fff; display: none; }
    .hamburger { display: none; background: none; border: none; color: #fff; font-size: 26px; cursor: pointer; }

    /* MAIN CONTENT */
    .main-wrapper { padding-top: 140px; padding-bottom: 80px; min-height: 80vh; width: 100%; max-width: 1200px; margin: 0 auto; padding-inline: 20px; display: flex; flex-direction: column; align-items: center; }

    /* FOOTER */
    footer { background: #02050a; border-top: 1px solid var(--glass-border); padding: 60px 20px 30px; text-align: center; }
    .footer-pfp-img { width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--primary); transition: 0.3s; }

    @media (max-width: 768px) { nav { display: none; } .hamburger { display: block; } }

    /* FRAMES */
    .profile-frame-wrapper { position: relative; width: 90px; height: 90px; margin: 0 auto 15px auto; display: flex; justify-content: center; align-items: center; }
    .pop-img-inner { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; z-index: 1; }
    .pop-frame-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 145%; height: 145%; z-index: 2; pointer-events: none; }
  </style>
</head>
<body>

<!-- BANNED OVERLAY -->
<div id="bannedOverlay">
    <i class="fas fa-ban" style="font-size:80px; color:#ff4757; margin-bottom:20px;"></i>
    <h1 style="font-family:'Orbitron'; color:#ff4757;">ACCES INTERZIS</h1>
    <div class="ban-details">
        <p>Contul tău a fost suspendat permanent.</p>
        <p style="font-size:14px; color:#aaa;">Motiv: <span id="globalBanReason">Nespecificat</span></p>
    </div>
</div>

<!-- ACCOUNT MODAL -->
<div id="accountModal" class="account-modal-overlay">
    <div class="account-card">
        <button id="closeAccountPop" class="close-pop">✕</button>
        <div class="profile-frame-wrapper">
            <img id="popUserImg" src="" class="pop-img-inner">
            <img id="popUserFrame" src="" class="pop-frame-overlay" style="display: none;">
        </div>
        <h3 id="popUserName" class="pop-user">Utilizator</h3>
        <p id="popUserEmail" style="color:var(--text-muted); font-size:12px; margin-bottom:20px;"></p>
        
        <div class="streak-box"><i class="fas fa-fire"></i> <span class="streak-txt">Daily Streak: 0</span></div>

        <div class="currency-wrapper">
            <div class="currency-card">
                <img src="https://iili.io/fhc1SKQ.png" style="width:30px;">
                <span id="popUserCoins" style="font-family:'Orbitron'; font-weight:900;">0</span>
            </div>
            <div class="currency-card">
                <img src="https://iili.io/fv5bmtj.png" style="width:30px;">
                <span id="popUserDiamonds" style="font-family:'Orbitron'; font-weight:900;">0</span>
            </div>
        </div>

        <button id="popLogoutBtn" style="background:transparent; border:1px solid #ff4757; color:#ff4757; padding:10px 20px; border-radius:10px; cursor:pointer; font-family:'Orbitron';">Log Out</button>
    </div>
</div>

<div id="siteContent">
    <!-- HEADER -->
    <div class="header-container">
        <header>
            <a href="index.html" class="logo"><img src="https://iili.io/fXvBEiB.png" alt="Logo"></a>
            <nav>
                <a href="index.html">Acasă</a>
                <a href="wall.html">Wall</a>
                <a href="help.html">Susține-ne</a>
                <button id="headerLoginBtn" class="login-btn-header">
                    <img id="headerUserImg" src="" class="user-avatar-small">
                    <span id="headerLoginText">LOGIN</span>
                </button>
            </nav>
            <button id="menuBtn" class="hamburger">☰</button>
        </header>
    </div>

    <!-- MAIN -->
    <main class="main-wrapper">
        <!-- AICI ADAUGI CONTINUTUL PAGINII TALE -->
        <h1 style="font-size: clamp(30px, 5vw, 50px); text-align:center;">PAGINĂ NOUĂ</h1>
        <p style="color:var(--text-muted);">Această pagină este pregătită pentru conținutul tău.</p>
    </main>

    <!-- FOOTER -->
    <footer>
        <div class="made-by-wrapper">
            <span style="color:#889; font-size:14px;">Website made by Lost Soul</span>
            <img src="https://iili.io/f1ddIfe.png" class="footer-pfp-img">
        </div>
        <p style="color:#556; font-size:12px; margin-top:20px;">&copy; 2024 KSDAPromovari. Toate drepturile rezervate.</p>
    </footer>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
    import { getFirestore, doc, getDoc, setDoc, onSnapshot, updateDoc, increment, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDoH80kffNrzFAcyRqsTVdifs-whUhwH9A",
      authDomain: "ksda-7546f.firebaseapp.com",
      projectId: "ksda-7546f",
      storageBucket: "ksda-7546f.firebasestorage.app",
      messagingSenderId: "306437513808",
      appId: "1:306437513808:web:28479810e3fdf71b32e755"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const provider = new GoogleAuthProvider();

    // DOM ELEMENTS
    const headerLoginBtn = document.getElementById('headerLoginBtn');
    const headerLoginText = document.getElementById('headerLoginText');
    const headerUserImg = document.getElementById('headerUserImg');
    const accountModal = document.getElementById('accountModal');

    // AUTH
    async function handleLogin() {
        try {
            const result = await signInWithPopup(auth, provider);
            const user = result.user;
            const userRef = doc(db, "accounts", user.uid);
            const snap = await getDoc(userRef);
            if(!snap.exists()) {
                await setDoc(userRef, { uid: user.uid, username: user.displayName, email: user.email, image: user.photoURL, coins: 250, diamonds: 0, streak: 0, joinedAt: new Date() });
            }
        } catch(e) { console.error(e); }
    }

    onAuthStateChanged(auth, user => {
        if (user) {
            headerLoginText.innerText = "ACCOUNT";
            headerUserImg.src = user.photoURL;
            headerUserImg.style.display = "block";
            
            onSnapshot(doc(db, "accounts", user.uid), snap => {
                if(!snap.exists()) return;
                const data = snap.data();
                document.getElementById('popUserName').innerText = data.username;
                document.getElementById('popUserEmail').innerText = data.email;
                document.getElementById('popUserCoins').innerText = data.coins || 0;
                document.getElementById('popUserDiamonds').innerText = data.diamonds || 0;
                document.querySelector('.streak-txt').innerText = `Daily Streak: ${data.streak || 0}`;
                document.getElementById('popUserImg').src = data.image;

                if (data.equippedFrame?.img) {
                    const f = document.getElementById('popUserFrame');
                    f.src = data.equippedFrame.img;
                    f.style.display = "block";
                    f.style.width = (data.equippedFrame.scale * 100) + "%";
                }
            });
        } else {
            headerLoginText.innerText = "LOGIN";
            headerUserImg.style.display = "none";
        }
    });

    headerLoginBtn.onclick = () => { if(!auth.currentUser) handleLogin(); else accountModal.classList.add('active'); };
    document.getElementById('closeAccountPop').onclick = () => accountModal.classList.remove('active');
    document.getElementById('popLogoutBtn').onclick = () => signOut(auth).then(() => accountModal.classList.remove('active'));

    // HAMBURGER
    document.getElementById('menuBtn').onclick = () => document.getElementById('sideMenu').classList.add('open');
    document.getElementById('closeMenu').onclick = () => document.getElementById('sideMenu').classList.remove('open');
</script>
</body>
</html>
